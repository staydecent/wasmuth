import check from 'check-arg-types'

/**
 * Pass the result of each promise to the next, from left to right.
 * @return {array} Returns an array of each promise result.
 */
export default function serial (tasks) {
  check(arguments, ['array'])

  const results = []
  const getResult = (prev, task) => prev
    .then(task)
    .then(result => {
      results.push(result)
      return result
    })
    .catch(err => reject(err))

  tasks
    .reduce(getResult, Promise.resolve())
    .then(() => resolve(results))
    .catch(err => reject(err))
}
