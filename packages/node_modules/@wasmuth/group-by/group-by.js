import check from "check-arg-types";

import partial from "@wasmuth/partial";
import reduce from "@wasmuth/reduce";

export default function groupBy(prop, ls) {
  if (arguments.length < 2) return partial(groupBy, arguments);
  check(arguments, ["string", "array"]);
  return reduce(
    (acc, elm) => {
      if (!acc[elm[prop]]) acc[elm[prop]] = [];
      acc[elm[prop]].push(elm);
      return acc;
    },
    {},
    ls
  );
}
