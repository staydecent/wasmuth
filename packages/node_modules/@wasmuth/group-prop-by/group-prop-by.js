import check from "check-arg-types";

import partial from "@wasmuth/partial";
import reduce from "@wasmuth/reduce";

export default function groupPropBy(valProp, prop, ls) {
  if (arguments.length < 3) return partial(groupPropBy, arguments);
  check(arguments, ["string", "string", "array"]);
  return reduce(
    (acc, elm) => {
      if (!acc[elm[prop]]) acc[elm[prop]] = [];
      acc[elm[prop]].push(elm[valProp]);
      return acc;
    },
    {},
    ls
  );
}
